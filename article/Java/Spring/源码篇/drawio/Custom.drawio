<mxfile host="Electron" modified="2023-08-26T01:39:47.805Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.6.5 Chrome/114.0.5735.243 Electron/25.3.1 Safari/537.36" etag="HWiXujw3pVnTYaA4NKIG" version="21.6.5" type="device">
  <diagram name="第 1 页" id="bAtDtEG7R3DhO82xSn1B">
    <mxGraphModel dx="714" dy="423" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-1" target="lg4MdsnYSZJ5lws4MwA0-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-1" target="lg4MdsnYSZJ5lws4MwA0-4">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-1" value="自定义标签解析" style="rounded=0;whiteSpace=wrap;html=1;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=20;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="50" y="90" width="240" height="50" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-2" value="&lt;div style=&quot;background-color: rgb(30, 31, 34); color: rgb(188, 190, 196); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 12pt;&quot;&gt;&lt;span style=&quot;color:#d5b778;&quot;&gt;&amp;lt;beans &lt;/span&gt;xmlns&lt;span style=&quot;color:#6aab73;&quot;&gt;=&quot;http://www.Springframework.org/schema/beans&quot;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#6aab73;&quot;&gt;       &lt;/span&gt;xmlns:&lt;span style=&quot;color:#c77dbb;&quot;&gt;xsi&lt;/span&gt;&lt;span style=&quot;color:#6aab73;&quot;&gt;=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#6aab73;&quot;&gt;       &lt;/span&gt;xmlns:&lt;span style=&quot;color:#c77dbb;&quot;&gt;myname&lt;/span&gt;&lt;span style=&quot;color:#6aab73;&quot;&gt;=&quot;http://www.lexueba.com/schema/user&quot;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#6aab73;&quot;&gt;       &lt;/span&gt;&lt;span style=&quot;color:#c77dbb;&quot;&gt;xsi&lt;/span&gt;:schemaLocation&lt;span style=&quot;color:#6aab73;&quot;&gt;=&quot;http://www.Springframework.org/schema/beans&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#6aab73;&quot;&gt;       http://www.Springframework.org/schema/beans/Spring-beans-2.0.xsd&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#6aab73;&quot;&gt;       http://www.lexueba.com/schema/user http://www.lexueba.com/schema/user.xsd&quot;&lt;/span&gt;&lt;span style=&quot;color:#d5b778;&quot;&gt;&amp;gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#d5b778;&quot;&gt;    &amp;lt;&lt;/span&gt;&lt;span style=&quot;color:#c77dbb;&quot;&gt;myname&lt;/span&gt;&lt;span style=&quot;color:#d5b778;&quot;&gt;:user &lt;/span&gt;password&lt;span style=&quot;color:#6aab73;&quot;&gt;=&quot;testbean&quot; &lt;/span&gt;userName&lt;span style=&quot;color:#6aab73;&quot;&gt;=&quot;aaa&quot; &lt;/span&gt;email&lt;span style=&quot;color:#6aab73;&quot;&gt;=&quot;bbb&quot;&lt;/span&gt;&lt;span style=&quot;color:#d5b778;&quot;&gt;/&amp;gt;&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#d5b778;&quot;&gt;&amp;lt;/beans&amp;gt;&lt;/span&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;" vertex="1" parent="1">
          <mxGeometry x="360" y="15" width="560" height="200" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-4" target="lg4MdsnYSZJ5lws4MwA0-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-4" target="lg4MdsnYSZJ5lws4MwA0-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-4" value="首先需要自己编写解析器" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" vertex="1" parent="1">
          <mxGeometry x="40" y="270" width="260" height="65" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-8" target="lg4MdsnYSZJ5lws4MwA0-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-8" value="&lt;div style=&quot;background-color: rgb(30, 31, 34); color: rgb(188, 190, 196); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 12pt;&quot;&gt;AbstractSingleBeanDefinitionParser&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" vertex="1" parent="1">
          <mxGeometry x="360" y="273.75" width="320" height="57.5" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-10" target="lg4MdsnYSZJ5lws4MwA0-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-10" value="编写具体规则" style="ellipse;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;fillColor=#d5e8d4;strokeColor=#82b366;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" vertex="1" parent="1">
          <mxGeometry x="750" y="262.5" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-12" value="&lt;div style=&quot;background-color: rgb(30, 31, 34); color: rgb(188, 190, 196); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 12pt;&quot;&gt;&lt;span style=&quot;color:#cf8e6d;&quot;&gt;public class &lt;/span&gt;UserBeanDefinitionParser &lt;span style=&quot;color:#cf8e6d;&quot;&gt;extends &lt;/span&gt;AbstractSingleBeanDefinitionParser{&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color:#b3ae60;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#b3ae60;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#cf8e6d;&quot;&gt;protected &lt;/span&gt;Class&amp;lt;?&amp;gt; &lt;span style=&quot;color:#56a8f5;&quot;&gt;getBeanClass&lt;/span&gt;(Element element) {&lt;br&gt;       &lt;span style=&quot;color:#cf8e6d;&quot;&gt;return &lt;/span&gt;User.&lt;span style=&quot;color:#cf8e6d;&quot;&gt;class&lt;/span&gt;;&lt;br&gt;    }&lt;br&gt;&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color:#b3ae60;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#b3ae60;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#cf8e6d;&quot;&gt;protected void &lt;/span&gt;&lt;span style=&quot;color:#56a8f5;&quot;&gt;doParse&lt;/span&gt;(Element element, BeanDefinitionBuilder builder) {&lt;br&gt;       String userName = element.getAttribute(&lt;span style=&quot;color:#6aab73;&quot;&gt;&quot;userName&quot;&lt;/span&gt;);&lt;br&gt;       String password = element.getAttribute(&lt;span style=&quot;color:#6aab73;&quot;&gt;&quot;password&quot;&lt;/span&gt;);&lt;br&gt;       String email = element.getAttribute(&lt;span style=&quot;color:#6aab73;&quot;&gt;&quot;email&quot;&lt;/span&gt;);&lt;br&gt;       builder.addPropertyValue(&lt;span style=&quot;color:#6aab73;&quot;&gt;&quot;userName&quot;&lt;/span&gt;, userName);&lt;br&gt;       builder.addPropertyValue(&lt;span style=&quot;color:#6aab73;&quot;&gt;&quot;password&quot;&lt;/span&gt;, password);&lt;br&gt;       builder.addPropertyValue(&lt;span style=&quot;color:#6aab73;&quot;&gt;&quot;email&quot;&lt;/span&gt;, email);&lt;br&gt;    }&lt;br&gt;}&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;" vertex="1" parent="1">
          <mxGeometry x="961" width="560" height="410" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-14" target="lg4MdsnYSZJ5lws4MwA0-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-23" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-14" target="lg4MdsnYSZJ5lws4MwA0-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-14" value="注册解析器" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;fillColor=#f8cecc;strokeColor=#b85450;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" vertex="1" parent="1">
          <mxGeometry x="45" y="440" width="250" height="52.5" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-19" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-16" target="lg4MdsnYSZJ5lws4MwA0-18">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-16" value="&lt;div style=&quot;background-color: rgb(30, 31, 34); color: rgb(188, 190, 196); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 12pt;&quot;&gt;NamespaceHandlerSupport&lt;/div&gt;" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;fillColor=#f8cecc;strokeColor=#b85450;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" vertex="1" parent="1">
          <mxGeometry x="355" y="434.38" width="330" height="63.75" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-18" target="lg4MdsnYSZJ5lws4MwA0-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-18" value="注册解析器" style="ellipse;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;fillColor=#f8cecc;strokeColor=#b85450;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" vertex="1" parent="1">
          <mxGeometry x="750" y="426.245" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-20" value="&lt;div style=&quot;background-color: rgb(30, 31, 34); color: rgb(188, 190, 196); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 12pt;&quot;&gt;&lt;span style=&quot;color:#cf8e6d;&quot;&gt;public class &lt;/span&gt;MyNameSpaceHandle &lt;span style=&quot;color:#cf8e6d;&quot;&gt;extends &lt;/span&gt;NamespaceHandlerSupport {&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color:#5f826b;font-style:italic;&quot;&gt;/**&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#5f826b;font-style:italic;&quot;&gt;     * Invoked by the {&lt;/span&gt;&lt;span style=&quot;color:#67a37c;font-style:italic;&quot;&gt;@link &lt;/span&gt;&lt;span style=&quot;color:#5f826b;font-style:italic;&quot;&gt;DefaultBeanDefinitionDocumentReader} after&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#5f826b;font-style:italic;&quot;&gt;     * construction but before any custom elements are parsed.&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#5f826b;font-style:italic;&quot;&gt;     *&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#5f826b;font-style:italic;&quot;&gt;     * &lt;/span&gt;&lt;span style=&quot;color:#67a37c;font-style:italic;&quot;&gt;@see &lt;/span&gt;&lt;span style=&quot;color:#5f826b;font-style:italic;&quot;&gt;NamespaceHandlerSupport#registerBeanDefinitionParser(String, BeanDefinitionParser)&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#5f826b;font-style:italic;&quot;&gt;     */&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#5f826b;font-style:italic;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#b3ae60;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#b3ae60;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#cf8e6d;&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color:#56a8f5;&quot;&gt;init&lt;/span&gt;() {&lt;br&gt;       registerBeanDefinitionParser(&lt;span style=&quot;color:#6aab73;&quot;&gt;&quot;user&quot;&lt;/span&gt;, &lt;span style=&quot;color:#cf8e6d;&quot;&gt;new &lt;/span&gt;UserBeanDefinitionParser());&lt;br&gt;    }&lt;br&gt;}&lt;br&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;" vertex="1" parent="1">
          <mxGeometry x="950" y="420" width="560" height="350" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-25" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-22" target="lg4MdsnYSZJ5lws4MwA0-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-22" value="具体解析" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;fillColor=#f0a30a;strokeColor=#BD7000;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="55" y="580" width="230" height="55" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-24" target="lg4MdsnYSZJ5lws4MwA0-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-24" value="获取命名空间" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;fillColor=#fa6800;strokeColor=#C73500;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="365" y="580" width="230" height="55" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-31" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-28" target="lg4MdsnYSZJ5lws4MwA0-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-33" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-28" target="lg4MdsnYSZJ5lws4MwA0-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-28" value="找到对应的NamespaceHandle" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;fillColor=#b1ddf0;strokeColor=#10739e;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" vertex="1" parent="1">
          <mxGeometry x="365" y="690" width="230" height="55" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-39" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-30" target="lg4MdsnYSZJ5lws4MwA0-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-30" value="调用我们编写的解析器进行解析" style="whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;fillColor=#fad7ac;strokeColor=#b46504;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" vertex="1" parent="1">
          <mxGeometry x="365" y="820" width="230" height="55" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-32" target="lg4MdsnYSZJ5lws4MwA0-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-32" value="利用映射关系" style="ellipse;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;fillColor=#b1ddf0;strokeColor=#10739e;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" vertex="1" parent="1">
          <mxGeometry x="650" y="690" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-34" target="lg4MdsnYSZJ5lws4MwA0-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-34" value="&lt;div style=&quot;background-color: rgb(30, 31, 34); color: rgb(188, 190, 196); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 12pt;&quot;&gt;&lt;span style=&quot;color:#cf8e6d;&quot;&gt;http&lt;/span&gt;\:&lt;span style=&quot;color:#cf8e6d;&quot;&gt;//www.foo.example/schema/component&lt;/span&gt;&lt;span style=&quot;color:#808080;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#6aab73;&quot;&gt;org.springframework.beans.factory.xml.ComponentNamespaceHandler&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#cf8e6d;&quot;&gt;http&lt;/span&gt;\:&lt;span style=&quot;color:#cf8e6d;&quot;&gt;//www.lexueba.com/schema/user&lt;/span&gt;&lt;span style=&quot;color:#808080;&quot;&gt;=&lt;/span&gt;&lt;span style=&quot;color:#6aab73;&quot;&gt;org.springframework.shu.my.MyNameSpaceHandle&lt;/span&gt;&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;" vertex="1" parent="1">
          <mxGeometry x="827" y="700" width="853" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-36" value="&lt;div style=&quot;background-color: rgb(30, 31, 34); color: rgb(188, 190, 196); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 12pt;&quot;&gt;&lt;span style=&quot;color:#7a7e85;&quot;&gt;//&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;获取所有已经配置的&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;&quot;&gt;handler&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;映射&lt;br&gt;&lt;/span&gt;Map&amp;lt;String, Object&amp;gt; handlerMappings = getHandlerMappings();&lt;br&gt;&lt;span style=&quot;color:#7a7e85;&quot;&gt;//&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;根据命名空间找到对应的信息&lt;br&gt;&lt;/span&gt;Object handlerOrClassName = handlerMappings.get(namespaceUri);&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;" vertex="1" parent="1">
          <mxGeometry x="1750" y="680" width="530" height="100" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-38" target="lg4MdsnYSZJ5lws4MwA0-42">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-38" value="找到我们的解析器" style="ellipse;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;fillColor=#fad7ac;strokeColor=#b46504;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;" vertex="1" parent="1">
          <mxGeometry x="650" y="807.5" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-45" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-42" target="lg4MdsnYSZJ5lws4MwA0-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-42" value="&lt;div style=&quot;background-color: rgb(30, 31, 34); color: rgb(188, 190, 196); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 12pt;&quot;&gt;&lt;span style=&quot;color:#cf8e6d;&quot;&gt;public &lt;/span&gt;BeanDefinition &lt;span style=&quot;color:#56a8f5;&quot;&gt;parse&lt;/span&gt;(Element element, ParserContext parserContext) {&lt;br&gt;    BeanDefinitionParser parser = findParserForElement(element, parserContext);&lt;br&gt;    &lt;span style=&quot;color:#cf8e6d;&quot;&gt;return &lt;/span&gt;(parser != &lt;span style=&quot;color:#cf8e6d;&quot;&gt;null &lt;/span&gt;? parser.parse(element, parserContext) : &lt;span style=&quot;color:#cf8e6d;&quot;&gt;null&lt;/span&gt;);&lt;br&gt;}&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;" vertex="1" parent="1">
          <mxGeometry x="820" y="770" width="560" height="160" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-47" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-44" target="lg4MdsnYSZJ5lws4MwA0-46">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-44" value="简单来说与默认标签解析一样" style="whiteSpace=wrap;html=1;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=20;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="1">
          <mxGeometry x="1460" y="820" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-49" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;orthogonalLoop=1;jettySize=auto;html=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=16;" edge="1" parent="1" source="lg4MdsnYSZJ5lws4MwA0-46">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1570" y="1100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-46" value="先解析，在注册，后通知" style="whiteSpace=wrap;html=1;sketch=1;hachureGap=4;jiggle=2;curveFitting=1;fontFamily=Architects Daughter;fontSource=https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DArchitects%2BDaughter;fontSize=20;fillColor=#d0cee2;strokeColor=#56517e;" vertex="1" parent="1">
          <mxGeometry x="1460" y="960" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lg4MdsnYSZJ5lws4MwA0-52" value="&lt;div style=&quot;background-color: rgb(30, 31, 34); color: rgb(188, 190, 196); font-family: &amp;quot;JetBrains Mono&amp;quot;, monospace; font-size: 12pt;&quot;&gt;&lt;span style=&quot;color:#cf8e6d;&quot;&gt;protected  final  &lt;/span&gt;AbstractBeanDefinition  &lt;span style=&quot;color:#56a8f5;&quot;&gt;parseInternal&lt;/span&gt;(Element  element,  ParserContext&lt;br&gt;       parserContext) {&lt;br&gt;    BeanDefinitionBuilder builder=BeanDefinitionBuilder.&lt;span style=&quot;font-style:italic;&quot;&gt;genericBeanDefinition&lt;/span&gt;();&lt;br&gt;    String parentName = getParentName(element);&lt;br&gt;    &lt;span style=&quot;color:#cf8e6d;&quot;&gt;if &lt;/span&gt;(parentName != &lt;span style=&quot;color:#cf8e6d;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;       builder.getRawBeanDefinition().setParentName(parentName);&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color:#7a7e85;&quot;&gt;//&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;获取自定义标签中的&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;&quot;&gt;class&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;，此时会调用自定义解析器如&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;&quot;&gt;UserBeanDefinitionParser&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;中的&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;&quot;&gt;getBeanClass&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;方法。&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;    &lt;/span&gt;Class&amp;lt;?&amp;gt; beanClass = getBeanClass(element);&lt;br&gt;    &lt;span style=&quot;color:#cf8e6d;&quot;&gt;if &lt;/span&gt;(beanClass != &lt;span style=&quot;color:#cf8e6d;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;       builder.getRawBeanDefinition().setBeanClass(beanClass);&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color:#cf8e6d;&quot;&gt;else &lt;/span&gt;{&lt;br&gt;       &lt;span style=&quot;color:#7a7e85;&quot;&gt;//&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;若子类没有重写&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;&quot;&gt;getBeanClass&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;方法则尝试检查子类是否重写&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;&quot;&gt;getBeanClassName&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;方法&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;       &lt;/span&gt;String beanClassName = getBeanClassName(element);&lt;br&gt;       &lt;span style=&quot;color:#cf8e6d;&quot;&gt;if &lt;/span&gt;(beanClassName != &lt;span style=&quot;color:#cf8e6d;&quot;&gt;null&lt;/span&gt;) {&lt;br&gt;          builder.getRawBeanDefinition().setBeanClassName(beanClassName);&lt;br&gt;       }&lt;br&gt;    }&lt;br&gt;    builder.getRawBeanDefinition().setSource(parserContext.extractSource(element));&lt;br&gt;    &lt;span style=&quot;color:#cf8e6d;&quot;&gt;if &lt;/span&gt;(parserContext.isNested()) {&lt;br&gt;       &lt;span style=&quot;color:#7a7e85;&quot;&gt;//&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;若存在父类则使用父类的&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;&quot;&gt;scope&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;属性&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;       &lt;/span&gt;builder.setScope(parserContext.getContainingBeanDefinition().getScope());&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color:#cf8e6d;&quot;&gt;if &lt;/span&gt;(parserContext.isDefaultLazyInit()) {&lt;br&gt;       &lt;span style=&quot;color:#7a7e85;&quot;&gt;// Default-lazy-init applies to custom bean definitions as well.&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;&quot;&gt;       //&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;配置延迟加载&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;       &lt;/span&gt;builder.setLazyInit(&lt;span style=&quot;color:#cf8e6d;&quot;&gt;true&lt;/span&gt;);&lt;br&gt;    }&lt;br&gt;    &lt;span style=&quot;color:#7a7e85;&quot;&gt;//&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;调用子类重写的&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;&quot;&gt;doParse&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;方法进行解析&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#7a7e85;font-family:&#39;Courier New&#39;,monospace;&quot;&gt;    &lt;/span&gt;doParse(element, parserContext, builder);&lt;br&gt;    &lt;span style=&quot;color:#cf8e6d;&quot;&gt;return &lt;/span&gt;builder.getBeanDefinition();&lt;br&gt;}&lt;/div&gt;" style="text;whiteSpace=wrap;html=1;fontSize=20;fontFamily=Architects Daughter;" vertex="1" parent="1">
          <mxGeometry x="1400" y="1100" width="560" height="750" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
